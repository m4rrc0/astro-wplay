---
import { Img } from "astro-imagetools/components";

// import { IO } from '@components'

const {
    id, class: _class, style, onload, image, src, fit, width, height, quality, withoutEnlargement, format, ...props
} = Astro.props || {}
// const querryParams = { fit, width, height, quality, withoutEnlargement, format }
// const querryString = Object.entries(querryParams).map(([param, val]) => {
//     return (typeof val).match(/undefined|null/) ? val : `${param}=${val}`
// }).filter(e => e).join('&')
// // console.log({querryParams, querryString})
// const src = `${srcRaw}${querryString ? '?' + querryString : ''}`
---

<!-- <IO img {...props} {src} {width} {height} {$skip} class={_class} {style} /> -->
<Img
    {...props}
    {src}
    {width}
    {height}
    attributes={{
        img: {
            id,
            class: _class,
            style,
            onload: `this.style.background = 'transparent';${onload || ''}`
        },
    }} />
