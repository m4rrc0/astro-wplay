---
import { IO } from '@components'

const { props: {
    image, src: srcRaw, fit, width, height, quality, withoutEnlargement, format, ...props
} = {} } = Astro
const querryParams = { fit, width, height, quality, withoutEnlargement, format }
const querryString = Object.entries(querryParams).map(([param, val]) => {
    return (typeof val).match(/undefined|null/) ? val : `${param}=${val}`
}).filter(e => e).join('&')
// console.log({querryParams, querryString})
const src = `${srcRaw}${querryString ? '?' + querryString : ''}`
---

<IO img {...props} {src} {width} {height} />
