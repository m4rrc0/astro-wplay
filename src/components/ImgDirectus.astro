---
import { Img } from "astro-imagetools/components";
import { imageDirectusSrc } from '@utils'

// import { IO } from '@components'

const {
    $skip, id, class: _class, style, onload, image, src: srcRaw, fit, width, height, quality, withoutEnlargement, format, ...props
} = Astro.props || {}

const src = imageDirectusSrc({ src: srcRaw, fit, width, height, quality, withoutEnlargement, format })

---

<!-- <IO img {...props} {src} {width} {height} {$skip} class={_class} {style} /> -->
<Img
    {...props}
    {src}
    {width}
    {height}
    attributes={{
        img: {
            ...(id ? { id } : {}),
            ...(_class ? { class: _class } : {}),
            ...(style ? { style } : {}),
            onload: `this.style.background = 'transparent';${onload || ''}`
        },
    }} />
